# 나비얌 챗봇 데이터 현황 및 제약사항

*최종 업데이트: 2025.07.31*

## 📊 **현재 데이터 상황**

### **🔍 보유 데이터**
- **파일명**: `sample_data.xlsx`
- **데이터 성격**: **일부 샘플 데이터**
- **용도**: 개발 및 초기 테스트용
- **제약사항**: 실제 서비스용 전체 데이터가 아님

### **📋 예상 전체 데이터 구조** 
*(BACKEND_HANDOVER.md 기준)*
- **총 시트 수**: 31개 시트
- **주요 카테고리**: 
  - 사용자 정보
  - 가게 정보 (착한가게)
  - 메뉴 정보
  - 대화 기록
  - 추천 기록
- **데이터베이스**: PostgreSQL/MySQL 구조 설계 완료

---

## ⚠️ **현재 제약사항**

### **🔴 테스트 제한사항**
```markdown
✅ 현재 가능한 테스트:
- 챗봇 기본 동작 (AI 모델 추론)
- 기본적인 NLU/NLG 기능
- 추천 알고리즘 구조 검증
- UI/UX 인터랙션 테스트

❌ 현재 제한적인 기능:
- 실제 착한가게 추천 (데이터 부족)
- 완전한 추천 정확도 평가
- 실제 사용자 시나리오 대규모 테스트
- 실시간 학습 성능 검증
```

### **📈 성능 평가 한계**
- **추천 정확도**: 샘플 데이터 기준으로만 측정 가능
- **커버리지**: 전체 카테고리/지역 대표성 부족
- **사용자 다양성**: 제한적인 사용자 프로필 시나리오

---

## 🚀 **전체 데이터 확보 시 필요 작업**

### **📊 1순위: 데이터 검증 및 전처리**
```bash
# 데이터 품질 검증
- 중복 데이터 제거
- 누락 값 처리
- 데이터 형식 표준화
- 카테고리 일관성 검증

# 데이터 구조 분석
- 31개 시트 상세 분석
- ERD 최종 검증 및 수정
- 데이터 관계 무결성 확인
```

### **🔧 2순위: 시스템 업데이트**
```bash
# 데이터베이스 마이그레이션
- PostgreSQL/MySQL 실제 데이터 적재
- 인덱스 최적화
- 백업 및 복구 전략 수립

# 모델 재학습
- Wide&Deep 추천 모델 전체 데이터 학습
- LoRA 파인튜닝 재실행
- 벡터 임베딩 재생성 (FAISS 인덱스)
```

### **📈 3순위: 성능 최적화**
```bash
# 성능 재평가
- 추천 정확도 측정 (Precision, Recall, F1)
- 응답 시간 최적화
- 메모리 사용량 최적화

# A/B 테스트 준비
- 실제 사용자 테스트 환경 구축
- 성능 지표 모니터링 시스템
- 피드백 수집 및 분석 파이프라인
```

---

## 📋 **sample_data.xlsx 상세 분석** ✅

### **🔍 파일 구조 분석 완료**
- ✅ **총 시트 수**: 31개 (예상과 일치!)
- ✅ **주요 데이터 테이블**:
  ```
  🏪 가게 관련: shop, brand, shop_menu, shop_menu_category
  👤 사용자 관련: user, user_location, userfavorite  
  🎫 쿠폰/티켓: coupon, ticket, giftcard
  📊 거래/리뷰: product_order, review, point_transaction
  🏢 협력업체: coop_coupon, coop_brand, coop_company
  ```

### **📊 샘플 데이터 현황** 
- **shop 테이블**: 11개 가게 (38개 컬럼)
- **주요 컬럼**: 가게명, 주소, 연락처, 영업시간, 카테고리, 착한가게 여부 등
- **데이터 완성도**: 기본 테스트에 충분한 구조적 완성도

### **⚠️ 제약사항 구체화**
```markdown
✅ 현재 가능한 기능:
- 11개 가게 대상 기본 추천 알고리즘 테스트
- 사용자-가게 매칭 로직 검증
- 카테고리별 필터링 기능 테스트
- 기본적인 대화형 인터랙션

❌ 제한적인 부분:
- 추천 다양성 부족 (가게 11개만)
- 지역적 편향 가능성
- 대규모 사용자 테스트 불가
- 실제 서비스 수준의 성능 검증 어려움
```

### **🎯 현재 가능한 테스트 시나리오**
1. **기본 추천 테스트**: "치킨 먹고 싶어" → 11개 가게 중 적절한 추천
2. **카테고리 필터링**: 음식 카테고리별 가게 분류 및 추천
3. **사용자 프로필 매칭**: 간단한 선호도 기반 추천
4. **대화 플로우**: 챗봇 기본 대화 → 의도 파악 → 추천 응답

### **📈 전체 데이터 확보 시 개선 예상**
- **가게 수**: 11개 → 수백/수천 개 (추천 다양성 대폭 증가)
- **지역 커버리지**: 제한적 → 전국 단위
- **사용자 패턴**: 샘플 → 실제 사용자 행동 데이터
- **정확도**: 구조 검증 → 실제 성능 최적화 가능

---

## 🤝 **Gemini-Claude 협력 데이터 구축 계획** 

### **📋 데이터 역할 분담 전략 (31개 테이블)**

#### **🏪 사용자 제공 예정 - 가게 관련 데이터 (5개 테이블)**
```markdown
✅ 사용자 담당:
1. shop (가게 기본 정보) - 38개 컬럼
   - 기본정보: shopName, addressName, contact
   - 운영정보: openHour, closeHour, breakTime, offDay  
   - 특성: isGoodInfluenceShop, category, sales_type

2. shop_menu (메뉴 정보) - 15개 컬럼
   - 메뉴: name, description, price, img
   - 상태: is_sold_out, is_best, priority

3. shop_menu_category (메뉴 카테고리) - 6개 컬럼
4. shop_menu_option (메뉴 옵션) - 8개 컬럼  
5. brand (브랜드 정보) - 15개 컬럼
```

#### **🤖 Gemini-Claude 협력 생성 - 나머지 데이터 (26개 테이블)**
```markdown
🧠 Gemini 분석 + 🤖 Claude 구현:

👤 사용자 관련 (3개):
- user (사용자 프로필, 25개 컬럼)
- user_location (지역 정보, 4개 컬럼)
- userfavorite (찜 기능, 5개 컬럼)

🎫 거래/주문 (2개):
- ticket (식당 이용권, 19개 컬럼)  
- product_order (상품 주문, 27개 컬럼)

🎁 쿠폰/프로모션 (6개):
- coupon (쿠폰 시스템, 30개 컬럼)
- coop_coupon + 매핑 테이블들

💳 기프트카드 (3개):
- giftcard, giftcard_wallet, giftcard_wallet_transaction

⭐ 리뷰/평가 (1개):
- review (별점/리뷰, 9개 컬럼)

🏢 협력업체 (3개):
- coop_brand, coop_company, coop_category

💰 포인트/결제 (2개):
- point_transaction, foodcard

+ 기타 매핑 테이블들
```

### **🚀 협력 워크플로우 계획**
```bash
1단계: Gemini 데이터 전략 수립
- 아동~청소년 페르소나 기반 사용자 생성 (초/중/고등학생, 취약계층)
- 학교/학원가 중심 지역 분포 (교육시설 반경 1km)
- 급식카드 사용 패턴 및 연령별 음식 선호도 반영한 주문 로직

2단계: Claude 구현  
- Gemini 전략을 바탕으로 실제 데이터 생성 코드 구현
- 가게 데이터와 일관성 있는 거래 내역 생성

3단계: 통합 검증
- 전체 데이터 일관성 및 현실성 검토
- RAG 시스템과 호환성 확인
```

### **📊 예상 데이터 생성 전략 (아동~청소년 대상)**
```python
페르소나별_패턴 = {
    "초등학생 (7-12세)": {
        "지역": ["학교 주변", "학원가", "주거지"],
        "시간": "방과후 15-17시, 주말 12-14시",
        "예산": "3,000-8,000원 (용돈 수준)",
        "선호카테고리": ["분식", "치킨", "피자", "햄버거", "아이스크림"],
        "급식카드": "주 사용자층 (착한가게 필수)",
        "특성": ["단맛 선호", "간편식 선호", "친구들과 함께"]
    },
    "중학생 (13-15세)": {
        "지역": ["학교 주변", "PC방 근처", "학원가", "놀이공간"],
        "시간": "방과후 16-19시, 주말 13-18시",
        "예산": "5,000-12,000원",
        "선호카테고리": ["치킨", "피자", "떡볶이", "김밥", "파스타"],
        "급식카드": "주 사용자층",
        "특성": ["SNS 트렌드 민감", "친구 추천 중요", "양 많은 음식"]
    },
    "고등학생 (16-18세)": {
        "지역": ["학교 주변", "학원가", "카페 거리"],
        "시간": "방과후 17-20시, 주말 자유시간",
        "예산": "8,000-15,000원",
        "선호카테고리": ["한식", "양식", "일식", "카페음식", "야식"],
        "급식카드": "사용자층 (고3은 제외될 수 있음)",
        "특성": ["맛과 분위기 중시", "데이트 장소", "시험기간 야식"]
    },
    "취약계층 아동": {
        "지역": ["주거지 반경 1km", "복지관 주변"],
        "시간": "중식 12-13시, 석식 17-18시",
        "예산": "급식카드 한도 내 (무료~저가)",
        "선호카테고리": ["한식", "분식", "도시락", "김밥"],
        "급식카드": "100% 의존",
        "특성": ["영양 균형 중요", "가격 민감", "포장 선호"]
    }
}
```

**📝 참고**: 사용자가 완전한 가게 데이터 제공 시 즉시 협력 생성 작업 시작 예정

---

## 🔄 **업데이트 히스토리**

| 날짜 | 변경사항 | 담당자 |
|------|----------|--------|
| 2025.07.31 | 초기 문서 생성 | Claude |
| | sample_data.xlsx 상세 분석 완료 | |
| | **Gemini-Claude 협력 데이터 구축 계획 추가** | **Claude** |
| | 전체 데이터 확보 시 업데이트 예정 | |

---

## 📞 **관련 문서**

- [conversation_summary_0731_v1.md](work_summary/conversation_summary_0731_v1.md) - 전체 프로젝트 현황
- [BACKEND_HANDOVER.md](BACKEND_HANDOVER.md) - 백엔드 인수인계 가이드
- `sample_data.xlsx` - 현재 보유 샘플 데이터

**⚠️ 중요**: 이 문서는 전체 데이터 확보 및 분석 진행에 따라 지속적으로 업데이트됩니다.