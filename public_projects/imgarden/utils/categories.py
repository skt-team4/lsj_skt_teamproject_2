"""
나비얌 챗봇 음식 카테고리 정의
급식카드 사용 아동/청소년을 위한 13개 카테고리
"""

# 음식 카테고리 상수
FOOD_CATEGORIES = [
    "한식",        # 백반, 국밥, 찌개
    "분식",        # 떡볶이, 김밥, 라면
    "일식",        # 초밥, 돈까스, 라멘
    "중식",        # 짜장면, 짬뽕
    "양식",        # 파스타, 스테이크
    "피자",        # 피자 전문점
    "치킨",        # 치킨 전문점
    "패스트푸드",   # 햄버거, 핫도그
    "아시안",      # 쌀국수, 카레
    "카페/디저트",  # 음료, 케이크
    "베이커리",     # 빵, 샌드위치
    "편의점",      # 도시락, 삼각김밥
    "마트"         # 대형마트 즉석조리
]

# 카테고리별 대표 메뉴 예시 (훈련 데이터 생성용)
CATEGORY_MENU_EXAMPLES = {
    "한식": ["김치찌개", "된장찌개", "백반", "제육볶음", "불고기", "비빔밥", "삼겹살"],
    "분식": ["떡볶이", "김밥", "라면", "순대", "튀김", "쫄면", "라볶이"],
    "일식": ["초밥", "돈까스", "라멘", "우동", "덮밥", "오니기리", "타코야키"],
    "중식": ["짜장면", "짬뽕", "탕수육", "볶음밥", "군만두", "깐풍기", "마파두부"],
    "양식": ["파스타", "스테이크", "리조또", "샐러드", "그라탕", "필라프"],
    "피자": ["페퍼로니피자", "치즈피자", "불고기피자", "콤비네이션피자", "고구마피자"],
    "치킨": ["후라이드치킨", "양념치킨", "간장치킨", "파닭", "순살치킨", "뿌링클"],
    "패스트푸드": ["햄버거", "치즈버거", "감자튀김", "치킨너겟", "핫도그", "콜라"],
    "아시안": ["쌀국수", "팟타이", "카레", "나시고랭", "분짜", "반미", "똠양꿍"],
    "카페/디저트": ["아메리카노", "라떼", "케이크", "쿠키", "아이스크림", "스무디"],
    "베이커리": ["크로와상", "샌드위치", "베이글", "도넛", "머핀", "샐러드", "브런치"],
    "편의점": ["도시락", "삼각김밥", "샌드위치", "컵라면", "김밥", "핫바", "음료"],
    "마트": ["즉석밥", "반찬", "샐러드", "초밥", "도시락", "치킨", "피자"]
}

# 카테고리별 평균 가격대 (급식카드 고려)
CATEGORY_PRICE_RANGE = {
    "한식": {"min": 5000, "max": 12000, "avg": 8000},
    "분식": {"min": 2500, "max": 8000, "avg": 5000},
    "일식": {"min": 7000, "max": 15000, "avg": 10000},
    "중식": {"min": 6000, "max": 12000, "avg": 8000},
    "양식": {"min": 8000, "max": 20000, "avg": 12000},
    "피자": {"min": 10000, "max": 25000, "avg": 15000},
    "치킨": {"min": 12000, "max": 20000, "avg": 16000},
    "패스트푸드": {"min": 5000, "max": 10000, "avg": 7000},
    "아시안": {"min": 7000, "max": 12000, "avg": 9000},
    "카페/디저트": {"min": 3000, "max": 8000, "avg": 5000},
    "베이커리": {"min": 3000, "max": 10000, "avg": 6000},
    "편의점": {"min": 1000, "max": 6000, "avg": 3500},
    "마트": {"min": 3000, "max": 10000, "avg": 6000}
}

# 카테고리 검증 함수
def is_valid_category(category: str) -> bool:
    """카테고리가 유효한지 확인"""
    return category in FOOD_CATEGORIES

# 가게명에서 카테고리 추론 함수
def infer_category_from_name(shop_name: str) -> str:
    """가게명에서 카테고리를 추론"""
    name_lower = shop_name.lower()
    
    # 키워드 기반 추론
    category_keywords = {
        "한식": ["한식", "백반", "국밥", "찌개", "감자탕", "설렁탕", "곰탕", "해장국"],
        "분식": ["분식", "김밥", "떡볶이", "순대", "라면", "튀김"],
        "일식": ["일식", "스시", "초밥", "라멘", "우동", "돈까스", "카츠", "이자카야"],
        "중식": ["중식", "중국", "반점", "짜장", "짬뽕", "마라", "훠궈"],
        "양식": ["양식", "파스타", "스테이크", "이탈리안", "레스토랑", "비스트로"],
        "피자": ["피자", "pizza"],
        "치킨": ["치킨", "통닭", "닭강정", "후라이드", "양념"],
        "패스트푸드": ["버거", "맥도날드", "kfc", "롯데리아", "버거킹", "써브웨이"],
        "아시안": ["쌀국수", "포", "팟타이", "카레", "인도", "태국", "베트남"],
        "카페/디저트": ["카페", "커피", "디저트", "케이크", "베이커리", "스타벅스"],
        "베이커리": ["베이커리", "빵", "브레드", "파리바게뜨", "뚜레쥬르", "샌드위치"],
        "편의점": ["편의점", "cu", "gs25", "세븐일레븐", "이마트24", "미니스톱"],
        "마트": ["마트", "이마트", "홈플러스", "롯데마트", "코스트코"]
    }
    
    # 가게명에서 키워드 찾기
    for category, keywords in category_keywords.items():
        for keyword in keywords:
            if keyword in name_lower:
                return category
    
    # 추론 실패시 기본값
    return "한식"  # 가장 일반적인 카테고리

# 복합 카테고리 처리 함수
def split_complex_category(category: str) -> list:
    """복합 카테고리를 개별 카테고리로 분리"""
    if "/" in category:
        return [cat.strip() for cat in category.split("/")]
    return [category]